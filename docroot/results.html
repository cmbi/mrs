<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:z2="http://www.hekkelman.com/libzeep/m2"
	xmlns:mrs="https://mrs.cmbi.ru.nl/mrs-web/ml"
	xml:lang="en" lang="en">
<head>
    <title>M6</title>

	<meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Maarten L. Hekkelman" />
    <meta name="generator" content="Japi" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />

	<link rel="stylesheet" type="text/css" href="css/mrs-style.css" />

	<script src="scripts/jquery/jquery.js" type="text/javascript"></script>
	<script src="scripts/mrs.js" type="text/javascript"></script>
	<script z2:if="${mobile}" src="scripts/mrs-m.js" type="text/javascript"></script>
</head>
<body>

<script z2:if="${mobile}" z2:inline="javascript" type="text/javascript">
$(document).ready(function(){
	if (M6M.init != null)
		M6M.init(${hitCount}, [[${db}]], [[${q}]]);
});
</script>

	<div z2:replace="header :: #header" />

	<div id="main">
		<div z2:if="${error}" class="relaxed">The query contained a syntax error (<span z2:text="${error}"></span>")</div>

		<div z2:if="${hits.empty}" class="no-hits">No hits found</div>

		<div z2:if="${relaxed and hits}" class="relaxed">Query did not return an exact result, displaying the closest matches</div>

		<mrs:if test="${not hits.empty}">
		
		<mrs:if test="${not mobile}">
		<div class="nav">
			<span class="left">
				Records <span z2:text="${first}"></span>-<span z2:text="${last}"></span> of <span z2:text="${#numbers.formatDecimal(hitCount)}"/>
			</span>
			
			<span class="right">
				<mrs:if test="${page > 1}">
					<mrs:url var="url"><mrs:param name="page" value="${page - 1}"/></mrs:url>
					<a href="${url}">previous</a>
				</mrs:if>
				<mrs:for var="p" begin="${page > 4 ? page - 4 : 1}"
							end="${lastPage > page + 4 ? page + 4 : lastPage}">
					<mrs:if test="${p != page}">
						<mrs:url var="url"><mrs:param name="page" value="${p}"/></mrs:url>
						<a href="${url}">${p}</a>
					</mrs:if>
					<mrs:if test="${p = page}">${p}</mrs:if>
				</mrs:for>
				<mrs:if test="${lastPage > page}">
					<mrs:url var="url"><mrs:param name="page" value="${page + 1}"/></mrs:url>
					<a href="${url}">next</a>
				</mrs:if>
			</span>
			&#x00a0;
		</div>
		<table id="tabel" cellspacing="0" cellpadding="0" style="position:relative;" class="list">
			<caption>
				<span z2:if="${q and not linked.db}">Results for query [<span z2:text="${q}"></span>]</span>
				<span z2:if="${similar}">Records similar to <span z2:text="${db+'/'+similar}"></span></span>
				<span z2:if="${linked.db}">Records linked to <span z2:text="${linked.db+'/'+linked.id}"></span></span>
			</caption>
			<tr>
				<th colspan="2">Nr</th>
				<mrs:if test="${ranked}"><th>Relevance</th></mrs:if>
				<th>ID</th>
				<th>Title</th>
			</tr>
	
			<mrs:iterate collection="hits" var="hit">
			<tr>
				<td><input type="checkbox" id="${db}/${hit.id}" /></td>
				<td class="nr">${hit.nr}</td>
				<mrs:if test="${ranked}">
					<td><img src="images/pixel-red.png" width="${hit.score}" height="7" style="padding-top:4px"/></td>
				</mrs:if>
				<td>
					<mrs:link db="${db}" nr="${hit.docNr}" q="${q}">${hit.id}</mrs:link>
				</td>
				<td>
					<span class="row-title">${hit.title}</span>
					<mrs:if test="${hit.links}">
						<span class="reference">
							<span class="reference-label">References:</span>
							<mrs:iterate collection="${hit.links}" var="link">
								<a href="linked?s=${db}&amp;d=${link}&amp;nr=${hit.docNr}">${link}</a>
							</mrs:iterate>
						</span>
					</mrs:if>
				</td>
			</tr>
			</mrs:iterate>
		</table>
		</mrs:if>

		<mrs:if test="${mobile}">
		<table id="tabel" cellspacing="0" cellpadding="0" style="position:relative;" class="list">
			<caption>
				<mrs:if test="${q and not linked.db}">Results for query [${q}]</mrs:if>
				<mrs:if test="${similar}">Records similar to ${db}/${similar}</mrs:if>
				<mrs:if test="${linked.db}">Records linked to ${linked.db}/${linked.id}</mrs:if>
			</caption>
			<tr>
				<th>Nr</th>
				<th>ID</th>
				<th>Title</th>
			</tr>
	
			<mrs:iterate collection="hits" var="hit">
			<tr>
				<td class="nr">${hit.nr}</td>
				<td>
					<mrs:link db="${db}" nr="${hit.docNr}" q="${q}">${hit.id}</mrs:link>
				</td>
				<td>
					<span class="row-title">${hit.title}</span>
				</td>
			</tr>
			</mrs:iterate>
		</table>
		</mrs:if>
		</mrs:if>

		<div z2:replace="spelling-suggestions :: suggestions" />
	</div>

	<mrs:include file="select.html" />
<script type="text/javascript">
addLoadEvent(function() { GlobalSelection.updateCheckboxes('tabel'); });
</script>
</body>
</html>
